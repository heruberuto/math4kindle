\nonstopmode
\hoffset=-4mm
\chyph % pou¾ijte formát csplain
\advance\vsize by12pt
\font\mathbf=cmmib10
\newfam\bfmath
\textfont\bfmath=\mathbf
\font\bbf=csbx12
\font\bigf=csbx12 scaled\magstep3
\font\logocvut=csbx12
\def\vcerejsiverze{\advance\day by-1 }

\newcount\kapnum \newcount\odstnum \newcount\rcenum \newcount\numlink
\newcount\okrajnum \newcount\tempnum
\newdimen\colwidth
\newif\ifladeni
\newif\iftwoside
\newwrite\fileref \newread\testin
\newif\ifbook     
\newif\ifcviceni  
\newif\ifpouzereseni

\ladenitrue %%%%%%%%%%% tiskne odkazovací slova k jednotlivým objektùm
%\vcerejsiverze %%%%%%%% text jsem pøipravil doma veèer a TeXuji ráno v práci
%\twosidetrue %%%%%%%%%% pro oboustranný tisk
%\booktrue      %%%%%%%% text vcetne cviceni pro tistena skripta
%\cvicenitrue   %%%%%%%% pouze tisk cviceni vcetne reseni
%\pouzeresenitrue %%%%%% tisk pouze reseni bez textu cviceni

\def\resenilist {\reseni 1 \reseni 2 
  \reseni 3 \reseni 4 \reseni 5 \reseni 6 \reseni 7 \reseni 8 \reseni 10 
  \reseni 11 
}

\def\nazevskripta {Úvod do algebry, zejména lineární}
\ifbook
   \let\nazevdila=\nazevskripta
   \mag 970 % skripta nejsou presne formatu A4, ale mensi
   \def\offsetvalue{7mm}
   \let\orimakeheadline=\makeheadline 
   \def\makeheadline{\orimakeheadline\medskip\nointerlineskip}
\else
   \def\nazevdila {Lineární algebra}
   \def\offsetvalue{4mm}
\fi

\def\beglink#1{}
\def\endlink{}
\def\aimlink#1{}
\def\urllink#1{{\tt#1}}
\def\zalozka#1{} \let\kapzalozka=\zalozka
\def\Brown{}\def\Black{}

\def\ifnextchar#1#2#3{\let\tznak=#1\def\bodyA{#2}\def\bodyB{#3}%
    \futurelet\znak\testuj}
\def\testuj{\ifx\znak\tznak\let\next=\bodyA\else\let\next=\bodyB\fi\next}
\def\ignorechar#1#2 {#1}

\def\kapitola{\advance\kapnum by 1 \odstnum=0 \rcenum=0 \okrajnum=0
     \ifnextchar[{\kaplabel}{\def\dolink{}\def\kaplabelik{}\inkapitola}}
\def\inkapitola #1 | #2 \par {\vfil\break
    \bigskip\noindent\raise15pt\hbox{\kapzalozka{#2}\dolink}%
    {\bbf\ifnum\kapnum=0\else\the\kapnum. \fi#1}\par\nobreak\bigskip
    \xdef\headtext{\ifnum\kapnum=0 \else\the\kapnum. \fi#1}\xdef\lmark{}
    \immediate\write\fileref{\string\refkapitola{\the\pageno}{\headtext}}
    \ifx\kaplabelik\empty \else
      \immediate\write\fileref { \space\space\space
         \string\refodstavec [\kaplabelik]{\the\kapnum}}\fi
   \global\headline={\hfil\starthead}}
\def\kaplabel[#1] {%\expandafter\ifx\csname c:#1\endcsname\relax
   \def\kaplabelik{#1}\def\dolink{\aimlink{c:#1}}%
   \inkapitola}
\def\starthead{\ifodd\pageno\else\xdef\lmark{\firstmark}\fi
   \global\headline={\vbox{%
   \iftwoside\ifodd\pageno
      \line{\strut\it \hfil\nazevodstavcu}%
   \else
      \line{\strut\it \xdef\lmark{\firstmark}\headtext\hfil}%
   \fi\else
      \line{\strut\it \nazevdila\hfil\headtext}%
   \fi
   \smallskip\hrule}}}
\def\dalsiodstavec#1{%
   \ifnextchar*{\def\nazevodstavce{#1.\kern-2pt*}\ignorechar\doodstavec}%
               {\def\nazevodstavce{#1.}\doodstavec}}
\def\doodstavec{\endpar \advance\odstnum by 1
   \def\start{\noindent\leftsymbol
    {\bf\the\kapnum.\the\odstnum. \nazevodstavce}\space\barva}
   \aimlink{o:\the\kapnum.\the\odstnum}%
   \ifnextchar[{\ulozlabel}{\start}}
\def\normalendpar{\par\removelastskip \penalty-200\bigskip}
\let\endpar=\normalendpar
\def\barva{} \def\leftsymbol{}
\def\ulozlabel[#1]{\aimlink{c:#1}%
     \immediate\write\fileref { \space\space\space
         \string\refodstavec [#1]{\the\kapnum.\the\odstnum}}%
   \ifladeni \noindent\llap{[#1]\ \ifcviceni\quad\fi}\fi
   \start\ignorespaces}
\def\rce(#1){\expandafter\ifx\csname r:#1\endcsname\relax
     \global\advance\rcenum by1
     \expandafter\xdef\csname r:#1\endcsname {\the\kapnum.\the\rcenum}%
     \aimlink{r:#1}%
   \else\errmessage{duplikace labelu rce(#1)}%
   \fi  \eqno (\the\kapnum.\the\rcenum)}
\def\pozn{\dalsiodstavec{Poznámka}}
\let\poznamka=\pozn
\def\priklad{\dalsiodstavec{Pøíklad}}
\def\cviceni{\dalsiodstavec{Cvièení}}
\def\pozorovani{\dalsiodstavec{Pozorování}}
\def\algoritmus{\ifnextchar({\nazvanyalgoritmus}{\dalsiodstavec{Algoritmus}}}
\def\nazvanyalgoritmus(#1) {\dalsiodstavec{Algoritmus (#1)}}
\def\shrnuti{\dalsiodstavec{Shrnutí}}
\def\definice{\dalsiodstavec{Definice}}
\def\veta{\ifnextchar({\nazvanaveta}{\dalsiodstavec{Vìta}}}
\def\nazvanaveta(#1) {\ifnextchar*{\ignorechar{\dalsiodstavec{Vìta* (#1)}}}%
                                  {\dalsiodstavec{Vìta (#1)}}}
\def\dukaz{\removelastskip\bigskip\noindent{\bf Dùkaz.}\space\ignorespaces}
\def\exdukaz{\removelastskip\bigskip\noindent
     {\bf Dùkaz }(pro hloubavé ètenáøe).\space\ignorespaces}
\let\nodukaz=\relax
\def\bod(#1){({\rm#1})&\quad}
\let\em=\it
\def\eng{\medskip\hrule width .15\hsize\medskip\noindent\llap*}
\def\eng#1\par{}
\def\ncite{\ifnextchar({\citerce}{\citeodst}}
\def\lcite[#1]{~/\ncite[#1]/}
\def\kcite#1{~\let\patvar=#1\citeodst}
\def\cite{~\ncite}
\def\citeodst[#1]{\expandafter\ifx\csname c:#1\endcsname\relax ??%
   \message{odkaz [#1] neni deklarovan.}%
   \else \beglink{c:#1}\patvar{\csname c:#1\endcsname}\endlink\fi
   \let\patvar=\relax}
\def\citerce(#1){\expandafter\ifx\csname r:#1\endcsname\relax (??)%
   \else \beglink{r:#1}(\csname r:#1\endcsname)\endlink\fi}
\def\okraj #1 | #2 \par {\par
   \global\advance\okrajnum by 1
   \global\setbox0=\hbox to0pt{\def\hb{\break}\line
      \iftwoside
      \ifodd 0\csname ok:\the\kapnum:\the\okrajnum\endcsname    
         {\hfil\rlap{\hskip1em\vtop
         {\hsize=.8in\noindent\raise15pt\hbox{\zalozka{#2}}\raggedright
          \it\Brown#1\Black}}}%
      \else {\llap{\vtop
          {\hsize=.8in
          \leftskip=0pt plus4em \parfillskip=0pt 
          \noindent\raise15pt\hbox{\zalozka{#2}}%
          \it\Brown#1\Black}\hskip1em}\hfil}%
      \fi\else
         {\hfil\rlap{\hskip1em\vtop
         {\hsize=.8in\noindent\raise15pt\hbox{\zalozka{#2}}\raggedright
          \it\Brown#1\Black}}}%
      \fi          
          \hss}%
   \ht0=3.5pt\dp0=3.5pt
   \global\everypar={\setbox2=\lastbox
       \write\fileref{ \space\string\refokraj{\the\pageno}{#1}}%
       {\def\uv##1{\clqq##1\crqq}\def\hb{\space}\mark{#1}}%
       \global\everypar={}\strut\box0\box2 }
   }
\def\nazevodstavcu{\edef\rmark{\botmark}%
   \ifx\lmark\empty \let\lmark=\rmark \fi
   \ifx\lmark\rmark 
       \ifx\lmark\empty \else \lowerfirst\lmark \lmark \fi
   \else 
       \lowerfirst\lmark \lowerfirst\rmark
       {\lmark} --- {\rmark}\fi
}
\def\lowerfirst#1{\def\temp{#1}\expandafter\sejmiprvni#1::}
\def\sejmiprvni#1#2::{\expandafter\def\temp{\lowercase{#1}#2}}

\def\ktere#1{\ifcase#1 nulté\or první\or druhé\or tøetí\or 
   ètvrté\or páté\or ¹esté\or sedmé\or osmé\or deváté\or desáté\or 
   jedenácté\or dvanácté\or tøinácté\or ètrnácté\or patnácté\or
   ¹estnácté\or sedmnácté\or osmnácté\else ??\fi}
\def\ktera#1{\ifcase#1 nulté\or první\or druhá\or tøetí\or 
   ètvrtá\or pátá\or ¹está\or sedmá\or osmá\or devátá\or desátá\or 
   jedenáctá\or dvanáctá\or tøináctá\or ètrnáctá\or patnáctá\or
   ¹estnáctá\or sedmnáctá\or osmnáctá\else ??\fi}
\let\patvar=\relax

\def\hb{\space}
\def\R{{\bf R}}
\def\N{{\bf N}}
\def\A{{\bf A}}
\def\B{{\bf B}}
\def\C{{\bf C}}
\def\D{{\bf D}}
\def\E{{\bf E}}
\def\G{{\bf G}}
\def\H{{\bf H}}
\def\O{{\bf O}}
\def\P{{\bf P}}
\def\L{{\bf L}}
\def\U{{\bf U}}
\def\Q{{\bf Q}}
\def\X{{\bf X}}
\def\Y{{\bf Y}}
\def\Z{{\bf Z}}
\let\phi=\varphi
\let\oodot=\odot \def\odot{{\oodot}}
\def\Circ{\mathbin{\raise.1em\hbox{$\scriptscriptstyle\bigcirc$}}}
\def\konv{\mathbin{\ast}}
\let\impl=\Rightarrow
\let\equiv=\Leftrightarrow
\def\lob<#1>{\langle#1\rangle}
\def\lobr<#1>{\langle\hbox{\rm r:}\,#1\rangle}
\def\lobb<#1>{\bigl\langle#1\bigr\rangle}
\def\hod{\mathop{\rm hod}}
\def\sgn{\mathop{\rm sgn}}
\def\diag{\mathop{\rm diag}}
\def\a{{\cal A}}
\def\b{{\cal B}}
\def\c{{\cal C}}
\def\m{{\cal M}}
\def\i{{\cal I}}
\def\d{{\rm d}}
\def\ker{\mathop{\rm Ker}}
\def\nullsp{\mathop{\rm Null}}
\def\defekt{\mathop{\rm def}}
\def\kolmy{\mathbin{\bot}}
\def\df#1{\buildrel\hbox{\sevenrm df}\over#1}
\let\vector\overrightarrow
\def\vec#1{{\fam\bfmath#1}}
\def\vecc #1_#2{\vec#1_1, \vec#1_2, \ldots, \vec#1_{#2}}
\def\lkvecc #1.#2_#3{#1_1\,\vec#2_1+#1_2\,\vec#2_2+\cdots+#1_#3\,\vec#2_#3}
\def\odsun{\hskip4em{}}
\def\teckacarka{\mathcode`\.="013B }
\def\soustava#1{\vcenter{\bigspaces\def\1{\hphantom1}\def\.{\rlap.}%
   \ialign{&\hfil${}##{}$\cr#1\crcr}}}
\def\bigspaces{\thickmuskip=10mu\medmuskip=7mu\relax}
\def\nobigspaces{\let\bigspaces=\relax}
\def\matice#1{\left(\kern-3pt\vcenter
  {\tabskip=5pt\halign{&\strut\hfil$##$\cr#1\crcr}}\kern-3pt\right)}
\def\bb#1 {\par\indent\llap{#1 }\hang\ignorespaces}
\def\+{\phantom+}
\def\dotfill{\cleaders\hbox to.5em{\hfil.\hfil}\hfill}
{\catcode`\:=13 \gdef:{\,\mathchar"003A\;}}
\mathcode`\:="8000

\input epsf
\def\noendpar{\def\endpar{\let\endpar=\normalendpar}}%
\def\obrazek #1+#2 #3 #4 #5{\endpar 
% #1 [zlomek \hsize] = sirka obrazku + #2 = okraj, #3 = vyska obrazku v radcich
% #4 = nazev souboru bez pripony, #5 = sada prikazu \p
   \colwidth=\hsize
   \advance\colwidth by-#1\hsize
   \nointerlineskip\moveright\colwidth\vbox to0pt{\offinterlineskip 
       \ifx\endpar\normalendpar \else \bigskip\fi    
       \kern4pt
       \kern\shiftpic
       \vbox to0pt{\pic{#1\hsize}{#4}\vss}#5\vss}
   \def\shiftpic{0pt}\noendpar   
   \colwidth=#1\hsize
   \advance\colwidth by#2\hsize
   \hangindent-\colwidth \hangafter=-#3
   \nobreak}
\def\p #1 #2 #3 {\vbox to0pt{\kern#1pt
   \setbox0=\hbox to0pt{\kern #2pt $#3$\hss}\ht0=0pt \dp0=0pt \box0\vss}}
\def\ha #1 {\hangindent=-\colwidth \hangafter=-#1 }
\def\dolu #1 {\def\shiftpic{#1}}
\def\shiftpic{0pt}

\ifx\pdfoutput\undefined 
  \def\pic #1#2{\epsfxsize=#1\hbox{\epsfbox{#2.eps}}}
\else
  \def\pic #1#2{\pdfximage width#1{#2.pdf}\pdfrefximage\pdflastximage}
\fi

\def\tocfill{\leaders\hbox{ . }\hfill}
\def\refkapitola#1#2{\advance\kapnum by1
  \bigskip\line{#2 \tocfill\space#1}\nobreak}
\def\refokraj#1#2{\advanceokraj
  \expandafter\xdef\csname ok:\the\kapnum:\the\okrajnum\endcsname{#1}%
  \line{\hskip3em #2 \tocfill\space#1}}
\def\refodstavec [#1]#2{%
  \expandafter\ifx\csname c:#1\endcsname\relax
     \expandafter\gdef\csname c:#1\endcsname {#2}%
   \else\errmessage{duplikace labelu [#1]}%
   \fi} 
\def\pocetokraju{
   \expandafter\ifx \csname kapokraj:\the\kapnum \endcsname \relax
      0\else \csname kapokraj:\the\kapnum \endcsname \fi}
\def\advanceokraj{\okrajnum=\pocetokraju
  \advance \okrajnum by1
  \expandafter \xdef \csname kapokraj:\the\kapnum \endcsname{\the\okrajnum}}
\def\softinput #1 {\let\next=\relax \openin\testin=#1
  \ifeof\testin \message{\warninginput}%
  \else \closein\testin \def\next{\input #1 }\fi
  \next}  
\def\delejobsah{\bgroup \kapnum=-1
%  \advance\vsize by-4\baselineskip
  \noindent {\bbf Obsah} %\bigskip
  \def\warninginput{VAROVÁNÍ: pro vytvoøení obsahu TeXujte je¹tì jednou.}%
  \softinput \jobname.ref
  \immediate\openout\fileref\jobname.ref
  \egroup}
\output={\iftwoside
  \ifodd\pageno \hoffset=-4mm \else \hoffset =\offsetvalue \fi\fi
  \let\uv=\relax \let~=\relax \let\lobr=\relax \plainoutput}

\ifbook            %%%%%%%%%%% makra pro cteni cviceni.tex %%%%%%%%%%%%%%
  \def\icviceni #1 {\okraj Cvièení | Cviceni \par
    \immediate\write\fileref{\string\startcviceni{\the\kapnum}{\the\odstnum}}
    \long\def\skipcv ##1\cvikap #1{}
    \expandafter \skipcv \input cviceni }
\else
  \def\icviceni #1 {} % cviceni nejsou ve verejne verzi textu k dispozici
\fi
\def\startcviceni#1#2{\expandafter\gdef\csname cv:#1\endcsname{#2}}

\let\ekap=\endinput
\long\def\vy #1\evy {}
\let\epar=\relax

\def\za#1){\par\indent\llap{#1) }\ignorespaces}
\def\diza#1){\hbox{#1)}\ }
\def\nza#1){ #1)~\ignorespaces}

\newif\ifipage  \ipagetrue                 %%%%%%%%%%%%%% rejstrik
\newwrite\fileidx
\ifcviceni \else 
\ifpouzereseni \else \immediate\openout\fileidx=\jobname.idx \fi\fi
\def\inl[#1]{\ifhmode\unskip\fi\doinl#1,,}  
\def\doinl#1,{\if?#1?\let\next=\relax\else
   \def\next{\bezmezery#1<<}\fi \next}
\def\bezmezery #1#2<<{\toidxfile[#1#2]\doinl}
\def\toidxfile[#1]{\ifipage\else \immediate\fi 
   \write\fileidx{\string\idx{#1}{\ifipage \the\pageno\else \the\kapnum\theodstnum\fi}}}
\def\theodstnum{\ifnum\odstnum<10 0\fi\ifnum\odstnum<100 0\fi\the\odstnum}

\def\trindef#1#2{\expandafter\def\csname x:#1\endcsname{#2}}

% lineární prostor: viz té¾ prostor

\trindef{R9n}{$\R^n$}
\trindef{R}{$\R$}
\trindef{R2}{$\R^2$}
\trindef{R3}{$\R^3$}
\trindef{v Rn}{v~$\R^n$}
\trindef{v R3}{v~$\R^3$}
\trindef{UO}{$U_O$}
\trindef{C}{$\C$}
\trindef{C0n}{$\C^n$}
\trindef{Z2}{$\Z_2$}
\trindef{GF2}{${\rm GF}(2)$}
\trindef{Z9p}{$\Z_p$}
\trindef{Z2n}{$\Z_2^n$}
\trindef{GFp}{${\rm GF}(p)$}
\trindef{GFpm}{${\rm GF}(p^m)$}
\trindef{0sim}{$\sim$}
\trindef{detA}{$\det\A$}
\trindef{rA}{$\hbox{r:}\,\A$}
\trindef{rA0lobrA}{$\lobr<\A>$}
\trindef{0lobM}{$\lob<\,.\,>$}
\trindef{1AT}{$\A^T$}
\trindef{1A1}{$\A^{-1}$}
\trindef{0MveeN}{$\vee$}
\trindef{0kolm}{$\kolmy$}
\trindef{1a}{$\a$}
\trindef{KerA}{$\ker\a$} 
\trindef{defA}{$\defekt\a$}
\trindef{hodA}{$\hod\A$}
\trindef{hoda}{$\hod\a$}
\trindef{0circ}{$\circ$}
\trindef{0normx}{$\|\,.\,\|$}
\trindef{E3}{$\E_3$}
\trindef{V3}{$V_3$}
\trindef{Vietovy}{Vi\`etovy}
\trindef{dimL}{$\dim L$}
\trindef{0times}{$\times$}
\trindef{0to}{$\to$}
\trindef{lp}{$l_p$}
\trindef{Lp}{$L_p$}

\immediate\write\fileidx{\string\idx{lineární: prostor}{11333}}
\trindef{11333}{viz té¾ {\it prostor}}

\def\delejrejstrik{\kapitola [rejstrik] Rejstøík | Rejstrik \par
  \pozn Na rozdíl od bì¾ných rejstøíkù tento neodkazuje na èísla
  stran, ale na èísla odstavcù. To by mìlo ètenáøi umo¾nit rychleji
  najít slovo z rejstøíku v textu, proto¾e cíl odkazu je pøesnìj¹í: 
  text odstavce je typicky men¹í ne¾ text celé strany.
  \par
  A¾ na výjimky nejsou v rejstøíku
  pojmy odkazovány na v¹echna místa, kde se vyskytují. Napøíklad pojem
  \uv{lineární prostor} nebo \uv{matice} by asi musel obsahovat 
  odkazy na skoro v¹echny odstavce. To by ztratilo smysl. 
  Èasto pou¾ívané pojmy jsou tedy v~rejstøíku odkazovány jen na místa, 
  kde jsou definovány nebo kde jsou uvedeny jejich dùle¾ité vlastnosti.
  \par
  \def\warninginput{VAROVÁNÍ: pro vytvoøení rejstøíku pou¾ijte \space
      csindex -s linal.icf -z il2 linal .}
  \begmulti 2
  \softinput \jobname.ind 
  \endmulti
}

\def\ind#1, {\def\bodyind{#1}\def\bodyindp{#1}%
   \ifnextchar\subind{}{\normalind#1, }}
\def\normalind#1, {\par\noindent\mark{\trind{\bodyindp}}\hangpar
   \trind{#1}\nobreak\enspace\printnums}
\def\subind#1, {\def\subbody{#1}\def\subbodyp{#1}%
   \ifnextchar\subsubind{}{\normalsubind#1, }}
\def\normalsubind#1, {\par\noindent\mark{\trind{\bodyindp}}\hangpar
   \trind{\bodyind}\space\trind{#1}%
   \def\bodyind{---}\nobreak\enspace\printnums}
\def\subsubind#1, {\par\noindent\mark{\trind{\bodyindp}}\hangpar
   \trind{\bodyind}\space\trind{\subbody}\space\trind{#1}%
   \def\bodyind{---}\def\subbody{---}\nobreak\enspace\printnums}
\def\hangpar{\hangindent=2em}
\def\trind#1{\expandafter\ifx\csname x:#1\endcsname\relax #1\else
   {\csname x:#1\endcsname}\fi}

\def\printnums{\afterassignment\printonenum\tempnum=}
\def\printonenum{\shownum\ifnextchar,%
    {, \afterassignment\printnums\let\temp=}{\ifnextchar-{\printft}{}}}
\def\shownum{%
  \expandafter \ifx \csname x:\the\tempnum\endcsname \relax
  \ifnum\tempnum<1000 (str.~\the\tempnum)%
  \else \odstnum=\tempnum \divide\tempnum by1000
        \edef\tmp{\the\tempnum}%
        \multiply\tempnum by1000 \advance\odstnum by-\tempnum
        \beglink{o:\tmp.\the\odstnum}\tmp.\the\odstnum\endlink
  \fi
  \else
     \csname x:\the\tempnum\endcsname
  \fi}
\def\printft--{--\afterassignment\onlyodstnum\odstnum=}
\def\onlyodstnum{\advance\odstnum by-\tempnum \the\odstnum
   \ifnextchar,{, \afterassignment\printnums\let\temp=}{}}

\newdimen\colsep  \colsep=2em % horiz. mezera mezi sloupci 
\newcount\tempnum             % pracovní promìnná
\splittopskip=\baselineskip
\def\roundtolines #1{%% zaokrouhlí na celé násobky vel. øádku
   \divide #1 by\baselineskip \multiply #1 by\baselineskip}
\def\corrsize #1{%% #1 := #1 + \splittopskip - \topskip
   \advance #1 by \splittopskip \advance #1 by-\topskip}
\def\begmulti #1 {\par\bigskip\penalty0 \def\Ncols{#1}
   \setbox0=\vbox\bgroup\penalty0
   %% \hsize := ¹íøka sloupce = (\hsize+\colsep) / n - \colsep
   \advance\hsize by\colsep \rightskip=0pt plus 2em
   \divide\hsize by\Ncols  \advance\hsize by-\colsep}
\def\endmulti{\vfil\egroup \setbox1=\vsplit0 to0pt
   %% \dimen1 := velikost zbylého místa na stránce
   \ifdim\pagegoal=\maxdimen \dimen1=\vsize \corrsize{\dimen1}
   \else \dimen1=\pagegoal \advance\dimen1 by-\pagetotal \fi
   \ifdim \dimen1<2\baselineskip
     \vfil\break \dimen1=\vsize \corrsize{\dimen1} \fi
   %% \dimen0 := vý¹ka n sloupcové sazby po rozdìlení do sloupcù
   %% = (\ht0 + (n-1)\baselineskip) / n, zaokruhleno na øádky
   \dimen0=\Ncols\baselineskip \advance\dimen0 by-\baselineskip
   \advance\dimen0 by \ht0 \divide\dimen0 by\Ncols
   \roundtolines{\dimen0}
   %% Rozdìlit sazbu n sloupcù do stránek nebo nerozdìlit ?
   \ifdim \dimen0>\dimen1 \splitpart  
   \else \makecolumns{\dimen0} \fi
   \ifvoid0 \else \box0\message{ERROR: ztracený text ve sloupcích?} \fi
   \bigskip}
\def\makecolumns#1{\setbox1=\hbox{}\tempnum=0
   \xdef\smark{}
   \loop \ifnum\Ncols>\tempnum
      \setbox1=\hbox{\unhbox1 \vsplit0 to#1 \hss
               \ifx\smark\empty\xdef\smark{\splitfirstmark}\fi}
      \advance\tempnum by1
   \repeat
   \hbox{}\nobreak\vskip-\splittopskip \nointerlineskip
   \line{\unhbox1\unskip\mark{{}\smark}\mark{{}\splitbotmark}}}
\def\splitpart{\roundtolines{\dimen1}
   \makecolumns{\dimen1} \advance\dimen0 by-\dimen1
   %% \dimen0 := vý¹ka _zbylé_ n sloupcové sazby
   %% \dimen1 := prázdné místo na stránce = (cca) \vsize
   \vfil\break
   \dimen1=\vsize \corrsize{\dimen1}
   %% Rozdìlit zbylou sazbu n sloupcù do více stránek ?
   \ifvoid0 \else
      \ifdim \dimen0>\dimen1 \splitpart
      \else 
        \dimen0=\Ncols\baselineskip \advance\dimen0 by-.5\baselineskip
        \advance\dimen0 by \ht0 \divide\dimen0 by\Ncols
        \roundtolines{\dimen0}
        \makecolumns{\dimen0} \fi \fi}

\newcount\bibnum \newwrite\filebr
\def\bibitem#1#2{\expandafter\def\csname br:#1\endcsname{#2}}
\def\warninginput{VAROVÁNÍ: kvùli odkazùm na literaturu TeXujte je¹tì jednou.}
\softinput \jobname.br
\ifcviceni \else 
\ifpouzereseni \else \immediate\openout\filebr=\jobname.br \fi\fi
\def\bib [#1]{\advance\bibnum by1
  \immediate\write\filebr{\string\bibitem{#1}{\the\bibnum}}%
  \smallskip\hangindent\parindent\indent\llap{[\the\bibnum]\enspace}\ignorespaces}
\def\bcite[#1]{\expandafter\ifx\csname br:#1\endcsname \relax
  \message{bib.odkaz [#1] není deklarován.}~[??]%
  \else ~[\csname br:#1\endcsname]\fi}

    %%%%%%%%%%% makra pro sazbu soustav ve cviceni.tex %%%%%%%%%%%%%%%
\def\sous {\vcenter\bgroup \def\hhead{}\sousa}
\def\sousa #1 {\ifx\\#1\relax
    \expandafter\sousb
  \else
    \ifx\hhead\empty 
       \def\hhead{\hfil${}\param#1$&}%
    \else
       \expandafter\def\expandafter\hhead
       \expandafter{\hhead ${}\param\hfil#1$&}%
    \fi
       \expandafter\sousa
  \fi
}
\def\sousb #1 \esous{\def\param{########}%
   \edef\hhead{\hhead}%
   \halign{\span\hhead ${}=\hfil##$\cr \\ #1 \crcr}\egroup}
\def\\ #1 {\if=#1%
    \expandafter \sousc
  \else \if!#1\else   % je mozne psat !\multispan4\dotfill\cr nebo tak neco
    \if0#1\expandafter\omit\else
      \def\tmp{#1}%
      \ifx\tmp\plusjedna+\else 
      \ifx\tmp\minusjedna-\else 
      \ifx\tmp\normaljedna \else #1\fi\fi\fi\fi
  &\fi\expandafter\expandafter\expandafter\\\expandafter\space
  \fi
}
\def\sousc #1 {#1 \cr}
\def\0{\phantom0}
\def\plusjedna{+1}
\def\minusjedna{-1}
\def\normaljedna{1}

\def\mmaticei#1{\vcenter{\baselineskip=.7\baselineskip
   \lineskip=0pt
   \halign{\hfil$\scriptstyle##$\hfil&&\enspace
   \hfil$\scriptstyle##$\hfil\crcr#1\crcr}}}
\def\mmatice#1{\left(\mmaticei{#1}\right)}
\def\dmmatice#1{\left|\mmaticei{#1}\right|}
\def\setbar{\catcode`|=13 }
{\setbar \gdef|{\kern-2pt&\vrule height1.35ex depth.6ex&\kern-2pt}}

\ifx\pdfoutput\undefined \else %%%%%%%%%%% makra pro pdfTeX %%%%%%%%%%%%%%%%
\pdfcompresslevel=9
\ifx\pdfannotlink\undefined  % Verze pdfTeXu >= 14
   \let\pdfannotlink=\pdfstartlink
\fi
\def\pdfsetcmykcolor#1{\special{PDF:#1 k}}
\def\Blue{\pdfsetcmykcolor{0.9 0.9 0.1 0}}
\def\Red{\pdfsetcmykcolor{0.1 0.9 0.9 0}}
\def\Brown{\pdfsetcmykcolor{0 0.85 0.87 0.5}}
\def\Green{\pdfsetcmykcolor{0.9 0.1 0.9 0}}
\def\Black{\pdfsetcmykcolor{0 0 0 1}}
\def\definice{\dalsiodstavec{\Blue Definice\Black}}
\def\veta{\def\barva{\Blue}%
   \ifnextchar({\nazvanaveta}{\dalsiodstavec{\Red Vìta\Black}}}
\def\nazvanaveta(#1) {\dalsiodstavec{\Red Vìta\Black\ (#1)}}
\def\em{\leavevmode\aftergroup\Black\Red\it}
\def\dukaz{\removelastskip\bigskip
   \noindent\Black\def\barva{}{\bf Dùkaz.}\space\ignorespaces}
\def\exdukaz{\removelastskip\bigskip
   \noindent\Black\def\barva{}%
   {\bf Dùkaz }(pro hloubavé ètenáøe).\space\ignorespaces}
\def\nodukaz{\Black\def\barva{}}
\pdfinfo{/Author (Petr Olsak)
         /CreationDate (/\the\month/\the\year) 
         /ModDate (\the\day. \the\month. \the\year)
         /Creator (TeX)
         /Producer (pdfTeX)
         /Title (Linearni algebra)
         /Subject (ucebni text)
         /Keywords (linearita, algebra)
}
\def\beglink#1{%          % Zaèátek textu odkazu, #1 je klíè odkazu
   \Green \pdfannotlink height9pt depth3pt 
     attr{/Border[0 0 0]} goto name{#1}\relax}
\def\endlink{\pdfendlink\ifx\barva\empty\Black\else\barva\fi}  
\def\aimlink#1{%          % Místo cíle odkazu, #1 je klíè odkazu
   \pdfdest name{#1} fith\relax}
\def\urllink#1{\pdfannotlink height 10pt depth 3pt 
   user{/Border[0 0 0]/Subtype/Link/A << /Type/Action/S/URI/URI(#1)>>}\relax
   \Green{\tt #1}\Black\pdfendlink}
\def\zalozka#1{\global\advance\numlink by1
   \pdfdest num\numlink fith\relax
   {\let~=\space\pdfoutline goto num\numlink {#1}}}
\def\kapzalozka#1{\global\advance\numlink by1
   \pdfdest num\numlink fith\relax
   {\let~=\space\pdfoutline goto num\numlink count-\pocetokraju {#1}}}  
\pdfcatalog{/PageMode /UseOutlines}\relax

\fi 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% konec maker pro pdfTeX %%%%%%%%%%%%%%%